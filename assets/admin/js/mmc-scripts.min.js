function loadInputSettings(){jQuery.ajax({url:ajaxurl,method:"POST",data:{action:"mmc_load_input_settings"},success:function(e){var t=jQuery.parseJSON(e);jQuery("#options-wrap").html(t.result),initDragDrop(),rearrangeFields()}})}function addSectionHtml(){jQuery.ajax({url:ajaxurl,method:"POST",data:{action:"mmc_add_section_html"},success:function(e){var t=jQuery.parseJSON(e);jQuery("#options").append(t.result),initDragDrop(),rearrangeFields()}})}function addControlHtml(){jQuery.ajax({url:ajaxurl,method:"POST",data:{action:"mmc_add_control_html"},success:function(e){var t=jQuery.parseJSON(e);jQuery("#options").append(t.result),initDragDrop(),rearrangeFields()}})}function saveOptionsFields(){var e=jQuery(".mmc-form").serialize();jQuery.ajax({url:ajaxurl,method:"POST",data:e,success:function(e){var t=jQuery.parseJSON(e);console.log(t),notice(t.message),jQuery("html,body").animate({scrollTop:0},0),jQuery(".accordion-item").removeClass("open").find(".collapse").slideUp()}})}function initDragDrop(){jQuery("#options").sortable({update:function(e,t){rearrangeFields()}})}function rearrangeFields(){var e=[],t=-1,r=0;jQuery(".accordion-item").each(function(a){e.push(jQuery(this).attr("id").replace("sort-","")),jQuery(this).hasClass("section")&&(t++,jQuery(this).find(".form-control").attr("name","section["+t+"]"),r=0),jQuery(this).hasClass("control")&&(jQuery(this).find(".label").attr("name","control["+t+"]["+r+"][label]"),jQuery(this).find(".slug").attr("name","control["+t+"]["+r+"][slug]"),jQuery(this).find(".type").attr("name","control["+t+"]["+r+"][type]"),jQuery(this).find(".description").attr("name","control["+t+"]["+r+"][description]"),jQuery(this).find(".choices").attr("name","control["+t+"]["+r+"][choices]"),r++)})}function notice(e){var t='<div id="mmc-message" class="updated notice is-dismissible"><p>'+e+'</p><button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button></div>';jQuery(".mmc-sub").before(t),setTimeout(function(){jQuery("#mmc-message").fadeOut(),setTimeout(function(){jQuery("#mmc-message").remove()},1e3)},2e3)}jQuery(document).ready(function(){loadInputSettings(),jQuery(document).on("click",".accordion-header .btn-info",function(){jQuery(this).parent().parent().hasClass("open")?(jQuery(this).parent().parent().removeClass("open"),jQuery(this).parent().parent().find(".accordion-collapse.collapse").slideUp()):(jQuery(this).parent().parent().addClass("open"),jQuery(this).parent().parent().find(".accordion-collapse.collapse").slideDown())}),jQuery(document).on("click",".accordion-header .btn-danger",function(){var e=jQuery(this).parent().parent();confirm("Are you sure?")&&(e.fadeOut(),setTimeout(function(){e.remove(),rearrangeFields()},1e3))}),jQuery(document).on("keyup change",".accordion-item .label",function(){var e=jQuery(this).parent().parent().parent().parent().parent(),t=jQuery(this).val();if(e.find(".accordion-header .accordion-button").html(t),e.hasClass("control")){var r=t.replace(/\ /g,"_").toLowerCase();e.find(".slug").val(r)}})});